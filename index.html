<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { font-family: Vazirmatn, Tahoma, sans-serif; }
    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
    .page { display: none !important; }
    .page.active { display: block !important; }
    
    .main-page { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
    .main-container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; max-width: 500px; width: 100%; text-align: center; }
    .main-container h1 { color: #667eea; font-size: 32px; margin-bottom: 30px; }
    .btn-panel { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 18px; margin-bottom: 15px; color: white; transition: all 0.3s; }
    .btn-panel:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .btn-admin { background: #667eea; }
    .btn-teacher { background: #48bb78; }
    
    .password-page { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
    .password-container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; max-width: 400px; width: 100%; text-align: center; }
    .password-container h1 { color: #667eea; font-size: 28px; margin-bottom: 30px; }
    .password-input-wrapper input { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 16px; margin-bottom: 20px; }
    .password-input-wrapper input:focus { outline: none; border-color: #667eea; }
    .btn-password { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; background: #667eea; color: white; margin-bottom: 10px; }
    .btn-back { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; background: #718096; color: white; }
    
    .search-page { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
    .search-container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; max-width: 600px; width: 100%; }
    .search-container h1 { color: #667eea; font-size: 28px; text-align: center; margin-bottom: 20px; }
    .search-input-wrapper input { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 16px; margin-bottom: 20px; }
    .search-input-wrapper input:focus { outline: none; border-color: #667eea; }
    .search-results { max-height: 300px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 10px; margin-bottom: 20px; }
    .search-result-item { padding: 15px; border-bottom: 1px solid #e0e0e0; cursor: pointer; }
    .search-result-item:hover { background: #f0f3ff; }
    .btn-group-search { display: flex; gap: 10px; }
    .btn-group-search button { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; color: white; }
    .btn-search { background: #667eea; }
    .btn-new { background: #48bb78; }
    
    .form-page { padding: 30px 20px; }
    .form-container { background: white; border-radius: 15px; padding: 30px; max-width: 1000px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
    
    /* Ù‡Ø¯Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø¯Ùˆ Ø¹Ú©Ø³ Ø´Ù‡ÛŒØ¯Ø§Ù† */
    .school-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }
    .martyrs-image {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #667eea;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      flex-shrink: 0;
      overflow: hidden;
    }
    .martyrs-image.left {
      order: 1;
    }
    .martyrs-image.right {
      order: 3;
    }
    .school-title-container {
      order: 2;
      text-align: center;
      flex-grow: 1;
      padding: 0 20px;
    }
    .school-title {
      color: #667eea;
      font-size: 24px;
      font-weight: 700;
      margin: 0;
    }
    .school-subtitle {
      color: #333;
      font-size: 16px;
      margin: 5px 0 0 0;
    }
    
    .form-header { border-bottom: 2px solid #f0f0f0; padding-bottom: 20px; margin-bottom: 25px; }
    .form-title { color: #667eea; font-size: 24px; font-weight: 700; margin: 0; }
    .form-counter { background: #667eea; color: white; padding: 8px 16px; border-radius: 15px; font-size: 13px; display: inline-block; }
    .card-section { background: #f5f7ff; border: 1px solid #e0e7ff; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
    .section-title { color: #667eea; font-weight: 700; margin-bottom: 15px; font-size: 15px; }
    .form-group-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px; }
    .form-label { color: #333; font-weight: 600; margin-bottom: 6px; font-size: 13px; }
    .form-control, .form-select { padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 13px; width: 100%; }
    .form-control:focus, .form-select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
    textarea.form-control { min-height: 70px; resize: vertical; }
    .buttons-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px; margin-top: 30px; }
    .btn-custom { padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 13px; color: white; transition: all 0.2s; }
    .btn-save { background: #48bb78; }
    .btn-edit { background: #4299e1; }
    .btn-delete { background: #f56565; }
    .btn-print { background: #667eea; }
    
    @media print {
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { 
        background: white; 
        font-size: 10px; 
        line-height: 1.2; 
        font-family: Vazirmatn, Tahoma, sans-serif;
      }
      .page { display: block !important; }
      .form-page { padding: 5px !important; }
      .form-container { 
        box-shadow: none; 
        border-radius: 0; 
        padding: 8px !important; 
        max-width: 100%;
        border: 1px solid #000;
      }
      .form-header { display: none; }
      
      /* Ù‡Ø¯Ø± Ú†Ø§Ù¾ Ø¨Ø§ Ø¯Ùˆ Ø¹Ú©Ø³ Ø´Ù‡ÛŒØ¯Ø§Ù† */
      .school-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #000;
        display: flex !important;
      }
      .martyrs-image {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #000;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f0f0f0;
        flex-shrink: 0;
        overflow: hidden;
      }
      .martyrs-image.left {
        order: 1;
      }
      .martyrs-image.right {
        order: 3;
      }
      .school-title-container {
        order: 2;
        text-align: center;
        flex-grow: 1;
        padding: 0 15px;
      }
      .school-title {
        font-size: 16px;
        font-weight: bold;
        margin: 0;
      }
      .school-subtitle {
        font-size: 12px;
        margin: 3px 0 0 0;
      }
      
      .card-section { 
        background: white !important;
        border: none !important;
        padding: 0 !important;
        margin-bottom: 0 !important;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0;
      }
      .section-title { 
        display: block !important;
        grid-column: 1 / -1;
        background: #f0f0f0;
        padding: 5px 8px;
        margin-bottom: 5px;
        font-size: 11px;
        font-weight: bold;
        border-bottom: 1px solid #ccc;
      }
      .form-group-row { 
        display: contents;
      }
      .form-group-row > div {
        display: grid;
        grid-template-columns: 1fr 1fr;
        border: 0.5px solid #000;
        padding: 4px;
        page-break-inside: avoid;
      }
      .form-group-row > div:nth-child(odd) {
        grid-column: 1;
      }
      .form-group-row > div:nth-child(even) {
        grid-column: 2;
      }
      .form-label { 
        font-size: 9px;
        font-weight: 600;
        text-align: right;
        padding-right: 5px;
      }
      .form-control, .form-select, textarea { 
        padding: 2px 3px !important;
        font-size: 9px !important;
        border: none !important;
        height: auto !important;
        min-height: 20px !important;
        text-align: right;
      }
      textarea { min-height: 25px !important; }
      .buttons-group { display: none !important; }
      
      /* Ø¨Ø®Ø´ Ø§Ù…Ø¶Ø§ÛŒ ØªØ§ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ */
      .approval-section {
        margin-top: 20px;
        padding-top: 10px;
        border-top: 1px solid #000;
        text-align: left;
      }
      .approval-line {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
      }
      .approval-space {
        width: 200px;
        border-bottom: 1px solid #000;
        text-align: center;
        padding-bottom: 5px;
      }
      
      @page {
        size: A4;
        margin: 5mm;
      }
    }
    @media (max-width: 768px) {
      .form-group-row { grid-template-columns: 1fr; }
      .buttons-group { grid-template-columns: repeat(2, 1fr); }
      .martyrs-image {
        width: 80px;
        height: 80px;
      }
      .school-title {
        font-size: 18px;
      }
      .school-subtitle {
        font-size: 14px;
      }
    }
    @media (max-width: 576px) {
      .school-header {
        flex-direction: column;
        text-align: center;
      }
      .martyrs-image {
        margin-bottom: 10px;
      }
      .school-title-container {
        padding: 10px 0;
      }
    }
  </style>
</head>
<body>
  <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
  <div id="mainPage" class="page active main-page">
    <div class="main-container">
      <h1>ğŸ“‹ Ø³ÛŒØ³ØªÙ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</h1>
      <button class="btn-panel btn-admin" onclick="showAdminPanel()">ğŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±</button>
      <button class="btn-panel btn-teacher" onclick="showTeacherPanel()">ğŸ‘¨â€ğŸ« Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…</button>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
  <div id="passwordPage" class="page password-page">
    <div class="password-container">
      <h1>ğŸ”’ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±</h1>
      <div class="password-input-wrapper">
        <input type="password" id="passwordInput" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
      </div>
      <button class="btn-password" onclick="checkPassword()">ÙˆØ±ÙˆØ¯</button>
      <button class="btn-back" onclick="backToMain()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
  <div id="searchPage" class="page search-page">
    <div class="search-container">
      <h1>ğŸ” Ø¬Ø³ØªØ¬Ùˆ</h1>
      <div class="search-input-wrapper">
        <input type="text" id="searchInput" placeholder="Ù†Ø§Ù… ÛŒØ§ Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ...">
      </div>
      <div id="searchResults" class="search-results" style="display: none;"></div>
      <div class="btn-group-search">
        <button class="btn-search" onclick="performSearch()">Ø¬Ø³ØªØ¬Ùˆ</button>
        <button class="btn-new" onclick="newRecord()">Ø«Ø¨Øª Ø¬Ø¯ÛŒØ¯</button>
        <button class="btn-back" onclick="backToPasswordPage()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ ÙØ±Ù… Ù…Ø¹Ù„Ù… -->
  <div id="teacherFormPage" class="page form-page">
    <div class="form-container">
      <!-- Ù‡Ø¯Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø¯Ùˆ Ø¹Ú©Ø³ Ø´Ù‡ÛŒØ¯Ø§Ù† -->
      <div class="school-header">
        <div class="martyrs-image left">
          <img src="https://i.imgur.com/eCxFZCM.jpeg" 
               alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
               style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
        </div>
        
        <div class="school-title-container">
          <h1 class="school-title">Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡ÛŒØ¯Ø§Ù† Ù†ÛŒØ§Ø³Ø±ÛŒ 1</h1>
          <p class="school-subtitle">ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</p>
        </div>
        
        <div class="martyrs-image right">
          <img src="https://i.imgur.com/VAsoxgf.jpeg" 
               alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
               style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
        </div>
      </div>
      
      <form id="teacherForm" onsubmit="submitTeacherForm(event)">
        <!-- Ù…Ø´Ø®ØµØ§Øª Ù‡ÙˆÛŒØªÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ‘¤ Ù…Ø´Ø®ØµØ§Øª Ù‡ÙˆÛŒØªÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù…</label><input type="text" class="form-control" name="firstName" required></div>
            <div><label class="form-label">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label><input type="text" class="form-control" name="lastName" required></div>
            <div><label class="form-label">Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ</label><input type="text" class="form-control" name="personnelCode" required></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ</label><input type="text" class="form-control" name="nationalId" required></div>
            <div><label class="form-label">Ø¬Ù†Ø³ÛŒØª</label><select class="form-select" name="gender" required><option>Ø§Ù†ØªØ®Ø§Ø¨</option><option>Ù…Ø±Ø¯</option><option>Ø²Ù†</option></select></div>
            <div><label class="form-label">Ù†Ø§Ù… Ù¾Ø¯Ø±</label><input type="text" class="form-control" name="fatherName"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ù…Ø­Ù„ ØµØ¯ÙˆØ±</label><input type="text" class="form-control" name="issuePlace"></div>
            <div><label class="form-label">Ù…Ø­Ù„ ØªÙˆÙ„Ø¯</label><input type="text" class="form-control" name="birthPlace"></div>
            <div><label class="form-label">ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</label><input type="text" class="form-control" name="birthDate" placeholder="1404/08/20"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">ÙˆØ¶Ø¹ÛŒØª ØªØ£Ù‡Ù„</label><select class="form-select" name="maritalStatus"><option></option><option>Ù…Ø¬Ø±Ø¯</option><option>Ù…ØªØ£Ù‡Ù„</option></select></div>
            <div><label class="form-label">ØªØ¹Ø¯Ø§Ø¯ ÙØ±Ø²Ù†Ø¯Ø§Ù†</label><input type="number" class="form-control" name="childrenCount" min="0"></div>
          </div>
        </div>

        <!-- Ù…Ø´Ø®ØµØ§Øª Ø´ØºÙ„ÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ’¼ Ù…Ø´Ø®ØµØ§Øª Ø´ØºÙ„ÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ø³Ù…Øª</label><select class="form-select" name="position"><option></option><option>Ù…Ø¯ÛŒØ±</option><option>Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</option><option>Ù…Ø¹Ø§ÙˆÙ† Ø¢Ù…ÙˆØ²Ø´ÛŒ</option><option>Ù…Ø¹Ø§ÙˆÙ† Ø§Ø¬Ø±Ø§ÛŒÛŒ</option><option>Ù…Ø¹Ø§ÙˆÙ† Ù¾Ø±ÙˆØ±Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ Ù¾Ø±ÙˆØ±Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ ÙˆØ±Ø²Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ Ø¨Ù‡Ø¯Ø§Ø´Øª</option><option>Ø®Ø¯Ù…ØªÚ¯Ø°Ø§Ø±</option><option>Ø³Ø±Ø§ÛŒØ¯Ø§Ø±</option><option>Ø³Ø§ÛŒØ±</option></select></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø§Ø³ØªØ®Ø¯Ø§Ù…</label><select class="form-select" name="employmentType"><option></option><option>Ø±Ø³Ù…ÛŒ</option><option>Ø±Ø³Ù…ÛŒ Ù¾ÛŒÙ…Ø§Ù†ÛŒ</option><option>Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ</option><option>Ø³Ø§ÛŒØ±</option></select></div>
            <div><label class="form-label">Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ</label><select class="form-select" name="degree"><option></option><option>Ø§Ø¨ØªØ¯Ø§ÛŒÛŒ</option><option>Ø³ÛŒÚ©Ù„</option><option>Ø¯ÛŒÙ¾Ù„Ù…</option><option>ÙÙˆÙ‚ Ø¯ÛŒÙ¾Ù„Ù…</option><option>Ù„ÛŒØ³Ø§Ù†Ø³</option><option>ÙÙˆÙ‚ Ù„ÛŒØ³Ø§Ù†Ø³</option><option>Ø¯Ú©ØªØ±Ø§</option><option>Ø³Ø§ÛŒØ±</option></select></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ø±Ø´ØªÙ‡ ØªØ­ØµÛŒÙ„ÛŒ</label><input type="text" class="form-control" name="major"></div>
            <div><label class="form-label">Ø³Ø§Ø¨Ù‚Ù‡ (Ø³Ø§Ù„)</label><input type="number" class="form-control" name="experienceYears" min="0"></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø§Ø´ØªØºØ§Ù„</label><select class="form-select" name="dutyType"><option></option><option>Ù…ÙˆØ¸Ù</option><option>ØºÛŒØ± Ù…ÙˆØ¸Ù</option><option>Ø³Ø§ÛŒØ±</option></select></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ù¾Ø§ÛŒÙ‡</label><select class="form-select" name="grade"><option></option><option>Ø§ÙˆÙ„</option><option>Ø¯ÙˆÙ…</option><option>Ø³ÙˆÙ…</option><option>Ú†Ù‡Ø§Ø±Ù…</option><option>Ù¾Ù†Ø¬Ù…</option><option>Ø´Ø´Ù…</option></select></div>
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ú©Ù„Ø§Ø³</label><select class="form-select" name="classNumber"><option></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="form-label">Ø±Ø§Ø¨Ø·</label><input type="text" class="form-control" name="liaison"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨ Ø­Ù‚ÙˆÙ‚ÛŒ</label><input type="text" class="form-control" name="salaryAccount"></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø¨ÛŒÙ…Ù‡</label><select class="form-select" name="insuranceType"><option></option><option>ØªØ£Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option><option>Ø®Ø¯Ù…Ø§Øª Ø¯Ø±Ù…Ø§Ù†ÛŒ</option><option>Ø¨ÛŒÙ…Ù‡ Ø³Ù„Ø§Ù…Øª</option></select></div>
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù‡Ù…Ø³Ø±</label><input type="text" class="form-control" name="spouseName"></div>
            <div><label class="form-label">Ø´ØºÙ„ Ù‡Ù…Ø³Ø±</label><input type="text" class="form-control" name="spouseJob"></div>
          </div>
        </div>

        <!-- ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ù…Ø¶Ø§ -->
        <div class="card-section">
          <div class="section-title">âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ù…Ø¶Ø§</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù… ØªØ§ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡</label><input type="text" class="form-control" name="approverName"></div>
            <div><label class="form-label">ØªØ§Ø±ÛŒØ® ØªØ§ÛŒÛŒØ¯</label><input type="text" class="form-control" name="approveDate" placeholder="1404/08/20"></div>
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ -->
        <div class="card-section">
          <div class="section-title">ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</div>
          <div class="form-group-row">
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡</label><input type="tel" class="form-control" name="mobile"></div>
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†</label><input type="tel" class="form-control" name="phone"></div>
            <div><label class="form-label">Ú©Ø¯ Ù¾Ø³ØªÛŒ</label><input type="text" class="form-control" name="postalCode"></div>
          </div>
          <div class="form-group-row">
            <div style="grid-column: 1/-1;"><label class="form-label">Ø¢Ø¯Ø±Ø³</label><textarea class="form-control" name="address"></textarea></div>
          </div>
        </div>

        <div class="buttons-group">
          <button type="submit" class="btn-custom btn-save">ğŸ’¾ Ø«Ø¨Øª</button>
          <button type="button" class="btn-custom btn-print" onclick="printForm()">ğŸ–¨ï¸ Ú†Ø§Ù¾</button>
          <button type="button" class="btn-custom btn-delete" onclick="backToMain()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ ÙØ±Ù… Ù…Ø¯ÛŒØ± -->
  <div id="adminFormPage" class="page form-page">
    <div class="form-container">
      <!-- Ù‡Ø¯Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø¯Ùˆ Ø¹Ú©Ø³ Ø´Ù‡ÛŒØ¯Ø§Ù† -->
      <div class="school-header">
        <div class="martyrs-image left">
          <img src="https://i.imgur.com/eCxFZCM.jpeg" 
               alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
               style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
        </div>
        
        <div class="school-title-container">
          <h1 class="school-title">Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡ÛŒØ¯Ø§Ù† Ù†ÛŒØ§Ø³Ø±ÛŒ 1</h1>
          <p class="school-subtitle">ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</p>
        </div>
        
        <div class="martyrs-image right">
          <img src="https://i.imgur.com/VAsoxgf.jpeg" 
               alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
               style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
        </div>
      </div>
      
      <div class="form-header">
        <h2 class="form-title">ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</h2>
        <span class="form-counter"><span id="recordCounter">â€“</span></span>
      </div>
      <form id="adminForm" onsubmit="submitAdminForm(event)">
        <!-- Ù…Ø´Ø®ØµØ§Øª Ù‡ÙˆÛŒØªÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ‘¤ Ù…Ø´Ø®ØµØ§Øª Ù‡ÙˆÛŒØªÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù…</label><input type="text" class="form-control" name="firstName" required></div>
            <div><label class="form-label">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label><input type="text" class="form-control" name="lastName" required></div>
            <div><label class="form-label">Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ</label><input type="text" class="form-control" name="personnelCode" required></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ</label><input type="text" class="form-control" name="nationalId" required></div>
            <div><label class="form-label">Ø¬Ù†Ø³ÛŒØª</label><select class="form-select" name="gender" required><option>Ø§Ù†ØªØ®Ø§Ø¨</option><option>Ù…Ø±Ø¯</option><option>Ø²Ù†</option></select></div>
            <div><label class="form-label">Ù†Ø§Ù… Ù¾Ø¯Ø±</label><input type="text" class="form-control" name="fatherName"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ù…Ø­Ù„ ØµØ¯ÙˆØ±</label><input type="text" class="form-control" name="issuePlace"></div>
            <div><label class="form-label">Ù…Ø­Ù„ ØªÙˆÙ„Ø¯</label><input type="text" class="form-control" name="birthPlace"></div>
            <div><label class="form-label">ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</label><input type="text" class="form-control" name="birthDate" placeholder="1404/08/20"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">ÙˆØ¶Ø¹ÛŒØª ØªØ£Ù‡Ù„</label><select class="form-select" name="maritalStatus"><option></option><option>Ù…Ø¬Ø±Ø¯</option><option>Ù…ØªØ£Ù‡Ù„</option></select></div>
            <div><label class="form-label">ØªØ¹Ø¯Ø§Ø¯ ÙØ±Ø²Ù†Ø¯Ø§Ù†</label><input type="number" class="form-control" name="childrenCount" min="0"></div>
          </div>
        </div>

        <!-- Ù…Ø´Ø®ØµØ§Øª Ø´ØºÙ„ÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ’¼ Ù…Ø´Ø®ØµØ§Øª Ø´ØºÙ„ÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ø³Ù…Øª</label><select class="form-select" name="position"><option></option><option>Ù…Ø¯ÛŒØ±</option><option>Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</option><option>Ù…Ø¹Ø§ÙˆÙ† Ø¢Ù…ÙˆØ²Ø´ÛŒ</option><option>Ù…Ø¹Ø§ÙˆÙ† Ø§Ø¬Ø±Ø§ÛŒÛŒ</option><option>Ù…Ø¹Ø§ÙˆÙ† Ù¾Ø±ÙˆØ±Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ Ù¾Ø±ÙˆØ±Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ ÙˆØ±Ø²Ø´ÛŒ</option><option>Ù…Ø±Ø¨ÛŒ Ø¨Ù‡Ø¯Ø§Ø´Øª</option><option>Ø®Ø¯Ù…ØªÚ¯Ø°Ø§Ø±</option><option>Ø³Ø±Ø§ÛŒØ¯Ø§Ø±</option><option>Ø³Ø§ÛŒØ±</option></select></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø§Ø³ØªØ®Ø¯Ø§Ù…</label><select class="form-select" name="employmentType"><option></option><option>Ø±Ø³Ù…ÛŒ</option><option>Ø±Ø³Ù…ÛŒ Ù¾ÛŒÙ…Ø§Ù†ÛŒ</option><option>Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ</option><option>Ø³Ø§ÛŒØ±</option></select></div>
            <div><label class="form-label">Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ</label><select class="form-select" name="degree"><option></option><option>Ø§Ø¨ØªØ¯Ø§ÛŒÛŒ</option><option>Ø³ÛŒÚ©Ù„</option><option>Ø¯ÛŒÙ¾Ù„Ù…</option><option>ÙÙˆÙ‚ Ø¯ÛŒÙ¾Ù„Ù…</option><option>Ù„ÛŒØ³Ø§Ù†Ø³</option><option>ÙÙˆÙ‚ Ù„ÛŒØ³Ø§Ù†Ø³</option><option>Ø¯Ú©ØªØ±Ø§</option><option>Ø³Ø§ÛŒØ±</option></select></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ø±Ø´ØªÙ‡ ØªØ­ØµÛŒÙ„ÛŒ</label><input type="text" class="form-control" name="major"></div>
            <div><label class="form-label">Ø³Ø§Ø¨Ù‚Ù‡ (Ø³Ø§Ù„)</label><input type="number" class="form-control" name="experienceYears" min="0"></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø§Ø´ØªØºØ§Ù„</label><select class="form-select" name="dutyType"><option></option><option>Ù…ÙˆØ¸Ù</option><option>ØºÛŒØ± Ù…ÙˆØ¸Ù</option><option>Ø³Ø§ÛŒØ±</option></select></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ù¾Ø§ÛŒÙ‡</label><select class="form-select" name="grade"><option></option><option>Ø§ÙˆÙ„</option><option>Ø¯ÙˆÙ…</option><option>Ø³ÙˆÙ…</option><option>Ú†Ù‡Ø§Ø±Ù…</option><option>Ù¾Ù†Ø¬Ù…</option><option>Ø´Ø´Ù…</option></select></div>
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ú©Ù„Ø§Ø³</label><select class="form-select" name="classNumber"><option></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></div>
            <div><label class="form-label">Ø±Ø§Ø¨Ø·</label><input type="text" class="form-control" name="liaison"></div>
          </div>
          <div class="form-group-row">
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨ Ø­Ù‚ÙˆÙ‚ÛŒ</label><input type="text" class="form-control" name="salaryAccount"></div>
            <div><label class="form-label">Ù†ÙˆØ¹ Ø¨ÛŒÙ…Ù‡</label><select class="form-select" name="insuranceType"><option></option><option>ØªØ£Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option><option>Ø®Ø¯Ù…Ø§Øª Ø¯Ø±Ù…Ø§Ù†ÛŒ</option><option>Ø¨ÛŒÙ…Ù‡ Ø³Ù„Ø§Ù…Øª</option></select></div>
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ -->
        <div class="card-section">
          <div class="section-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù‡Ù…Ø³Ø±</label><input type="text" class="form-control" name="spouseName"></div>
            <div><label class="form-label">Ø´ØºÙ„ Ù‡Ù…Ø³Ø±</label><input type="text" class="form-control" name="spouseJob"></div>
          </div>
        </div>

        <!-- ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ù…Ø¶Ø§ -->
        <div class="card-section">
          <div class="section-title">âœ… ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§Ù…Ø¶Ø§</div>
          <div class="form-group-row">
            <div><label class="form-label">Ù†Ø§Ù… ØªØ§ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡</label><input type="text" class="form-control" name="approverName"></div>
            <div><label class="form-label">ØªØ§Ø±ÛŒØ® ØªØ§ÛŒÛŒØ¯</label><input type="text" class="form-control" name="approveDate" placeholder="1404/08/20"></div>
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ -->
        <div class="card-section">
          <div class="section-title">ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</div>
          <div class="form-group-row">
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡</label><input type="tel" class="form-control" name="mobile"></div>
            <div><label class="form-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†</label><input type="tel" class="form-control" name="phone"></div>
            <div><label class="form-label">Ú©Ø¯ Ù¾Ø³ØªÛŒ</label><input type="text" class="form-control" name="postalCode"></div>
          </div>
          <div class="form-group-row">
            <div style="grid-column: 1/-1;"><label class="form-label">Ø¢Ø¯Ø±Ø³</label><textarea class="form-control" name="address"></textarea></div>
          </div>
        </div>

        <div class="buttons-group">
          <button type="submit" class="btn-custom btn-save">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡</button>
          <button type="button" class="btn-custom btn-edit" onclick="editRecord()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</button>
          <button type="button" class="btn-custom btn-delete" onclick="deleteRecord()">ğŸ—‘ï¸ Ø­Ø°Ù</button>
          <button type="button" class="btn-custom btn-print" onclick="printForm()">ğŸ–¨ï¸ Ú†Ø§Ù¾</button>
          <button type="button" class="btn-custom" style="background: #718096;" onclick="backToSearch()">â¬…ï¸ Ø¨Ø±Ú¯Ø´Øª</button>
        </div>
      </form>
    </div>
  </div>

  <div id="toastArea" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1055;"></div>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const ADMIN_PASSWORD = "222564";
    const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbxmOXK8N_1blZpooY7OEsEwX5vECXCxSNKnoOTrcOOsFdT1Rp5XyLMf2FLn5t-8hiDccQ/exec";
    
    let allStaff = [];
    let filteredStaff = [];
    let currentIndex = -1;

    function showToast(msg, type = 'info') {
      const id = 't' + Date.now();
      const colors = {success: 'bg-success', danger: 'bg-danger', warning: 'bg-warning', info: 'bg-info'};
      const html = `<div id="${id}" class="toast text-white ${colors[type]} border-0" style="min-width: 250px;"><div class="d-flex"><div class="toast-body">${msg}</div></div></div>`;
      document.getElementById('toastArea').insertAdjacentHTML('beforeend', html);
      new bootstrap.Toast(document.getElementById(id), { delay: 3000 }).show();
    }

    function loadAllData() {
      const url = WEBAPP_URL + '?action=getAll&callback=handleLoadAll';
      const script = document.createElement('script');
      window.handleLoadAll = function(data) {
        allStaff = Array.isArray(data) ? data : [];
        if (document.head.contains(script)) document.head.removeChild(script);
        delete window.handleLoadAll;
      };
      script.src = url;
      document.head.appendChild(script);
    }

    function showAdminPanel() {
      hideAllPages();
      document.getElementById('passwordPage').classList.add('active');
    }

    function showTeacherPanel() {
      hideAllPages();
      document.getElementById('teacherFormPage').classList.add('active');
      document.getElementById('teacherForm').reset();
    }

    function hideAllPages() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    }

    function backToMain() {
      hideAllPages();
      document.getElementById('mainPage').classList.add('active');
      document.getElementById('passwordInput').value = '';
    }

    function backToPasswordPage() {
      hideAllPages();
      document.getElementById('passwordPage').classList.add('active');
    }

    function checkPassword() {
      const pwd = document.getElementById('passwordInput').value;
      if (pwd === ADMIN_PASSWORD) {
        hideAllPages();
        document.getElementById('searchPage').classList.add('active');
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ù†Ù…Ø§ÛŒØ´
        setTimeout(() => {
          loadAllData();
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù‡Ø± 10 Ø«Ø§Ù†ÛŒÙ‡
    setInterval(() => {
      if (document.getElementById('searchPage').classList.contains('active')) {
        loadAllData();
      }
    }, 10000);
        }, 100);
        document.getElementById('searchInput').value = '';
        document.getElementById('searchResults').style.display = 'none';
        document.getElementById('passwordInput').value = '';
      } else {
        showToast('Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'danger');
        document.getElementById('passwordInput').value = '';
      }
    }

    document.getElementById('passwordInput').addEventListener('keyup', function(e) {
      if (e.key === 'Enter') checkPassword();
    });

    function performSearch() {
      const q = document.getElementById('searchInput').value.trim().toLowerCase();
      if (!q) {
        showToast('Ù…ØªÙ† Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'warning');
        return;
      }
      
      filteredStaff = allStaff.filter(item => {
        const lastName = String(item.lastName || '').toLowerCase();
        const firstName = String(item.firstName || '').toLowerCase();
        const code = String(item.personnelCode || '').toLowerCase();
        const nationalId = String(item.nationalId || '').toLowerCase();
        return lastName.includes(q) || firstName.includes(q) || code.includes(q) || nationalId.includes(q);
      });
      
      if (filteredStaff.length === 0) {
        showToast('Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯', 'warning');
        document.getElementById('searchResults').style.display = 'none';
        return;
      }
      
      displaySearchResults();
    }

    function displaySearchResults() {
      const resultsDiv = document.getElementById('searchResults');
      if (filteredStaff.length === 0) {
        resultsDiv.style.display = 'none';
        return;
      }
      resultsDiv.innerHTML = filteredStaff.map((item, idx) => `
        <div class="search-result-item" onclick="selectRecord(${idx})" style="cursor: pointer; padding: 12px; border-bottom: 1px solid #ddd;">
          <strong style="color: #667eea; font-size: 14px;">${item.firstName || ''} ${item.lastName || ''}</strong><br>
          <small style="color: #999; font-size: 12px;">Ú©Ø¯: ${item.personnelCode || item.nationalId || 'â€“'}</small>
        </div>
      `).join('');
      resultsDiv.style.display = 'block';
    }

    function selectRecord(idx) {
      currentIndex = idx;
      fillForm(filteredStaff[idx], 'adminForm');
      hideAllPages();
      document.getElementById('adminFormPage').classList.add('active');
      updateCounter();
    }

    function newRecord() {
      currentIndex = -1;
      hideAllPages();
      document.getElementById('adminFormPage').classList.add('active');
      document.getElementById('adminForm').reset();
      updateCounter();
    }

    function backToSearch() {
      hideAllPages();
      document.getElementById('searchPage').classList.add('active');
      document.getElementById('searchInput').value = '';
      document.getElementById('searchResults').style.display = 'none';
    }

    function fillForm(record, formId) {
      const form = document.getElementById(formId);
      Object.entries(record).forEach(([k, v]) => {
        const el = form.querySelector(`[name="${k}"]`);
        if (el) el.value = v || '';
      });
    }

    function collectFormData(formId) {
      const data = {};
      const form = document.getElementById(formId);
      const formData = new FormData(form);
      for (let [key, value] of formData.entries()) {
        data[key] = value;
      }
      return data;
    }

    function updateCounter() {
      const text = currentIndex >= 0 && filteredStaff.length > 0 ? `${currentIndex + 1} Ø§Ø² ${filteredStaff.length}` : 'â€“';
      document.getElementById('recordCounter').textContent = text;
    }

    function printForm() { 
      const form = document.getElementById(document.getElementById('adminFormPage').classList.contains('active') ? 'adminForm' : 'teacherForm');
      const data = collectFormData(form.id);
      
      let html = `
        <html dir="rtl">
        <head>
          <meta charset="utf-8">
          <style>
            * { margin: 0; padding: 0; font-family: Vazirmatn, Tahoma, Arial; }
            body { font-size: 11px; line-height: 1.4; padding: 10px; }
            .container { border: 2px solid #000; padding: 15px; }
            .print-header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 15px;
              padding-bottom: 10px;
              border-bottom: 2px solid #000;
            }
            .martyrs-image {
              width: 80px;
              height: 80px;
              border-radius: 50%;
              object-fit: cover;
              border: 2px solid #000;
              display: flex;
              align-items: center;
              justify-content: center;
              background: #f0f0f0;
              flex-shrink: 0;
              overflow: hidden;
            }
            .martyrs-image.left {
              order: 1;
            }
            .martyrs-image.right {
              order: 3;
            }
            .school-title-container {
              order: 2;
              text-align: center;
              flex-grow: 1;
              padding: 0 15px;
            }
            .school-title {
              font-size: 18px;
              font-weight: bold;
              margin: 0;
            }
            .school-subtitle {
              font-size: 14px;
              margin: 5px 0 0 0;
              color: #333;
            }
            .row { display: grid; grid-template-columns: 1fr 1fr; gap: 0; margin-bottom: 0; }
            .field { border: 1px solid #000; padding: 8px; display: flex; }
            .field-label { font-weight: bold; width: 40%; text-align: right; padding-left: 10px; }
            .field-value { width: 60%; text-align: right; border-left: 1px solid #000; padding-right: 8px; }
            .approval-section {
              margin-top: 20px;
              padding-top: 10px;
              border-top: 1px solid #000;
              text-align: left;
            }
            .approval-line {
              display: flex;
              justify-content: space-between;
              margin-top: 30px;
            }
            .approval-space {
              width: 200px;
              border-bottom: 1px solid #000;
              text-align: center;
              padding-bottom: 5px;
            }
            @media print { body { padding: 0; margin: 0; } }
          </style>
        </head>
        <body>
        <div class="container">
          <div class="print-header">
            <div class="martyrs-image left">
              <img src="https://i.imgur.com/eCxFZCM.jpeg" 
                   alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
                   style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
            </div>
            
            <div class="school-title-container">
              <h1 class="school-title">Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡ÛŒØ¯Ø§Ù† Ù†ÛŒØ§Ø³Ø±ÛŒ 1</h1>
              <h2 class="school-subtitle">ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ÛŒ</h2>
            </div>
            
            <div class="martyrs-image right">
              <img src="https://i.imgur.com/VAsoxgf.jpeg" 
                   alt="Ø´Ù‡ÛŒØ¯ Ù†ÛŒØ§Ø³Ø±ÛŒ" 
                   style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
            </div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†Ø§Ù…</div><div class="field-value">${data.firstName || ''}</div></div>
            <div class="field"><div class="field-label">Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ</div><div class="field-value">${data.personnelCode || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</div><div class="field-value">${data.lastName || ''}</div></div>
            <div class="field"><div class="field-label">Ú©Ø¯ Ù…Ù„ÛŒ</div><div class="field-value">${data.nationalId || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†Ø§Ù… Ù¾Ø¯Ø±</div><div class="field-value">${data.fatherName || ''}</div></div>
            <div class="field"><div class="field-label">Ø¬Ù†Ø³ÛŒØª</div><div class="field-value">${data.gender || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù…Ø­Ù„ ØµØ¯ÙˆØ±</div><div class="field-value">${data.issuePlace || ''}</div></div>
            <div class="field"><div class="field-label">Ù…Ø­Ù„ ØªÙˆÙ„Ø¯</div><div class="field-value">${data.birthPlace || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</div><div class="field-value">${data.birthDate || ''}</div></div>
            <div class="field"><div class="field-label">ÙˆØ¶Ø¹ÛŒØª ØªØ£Ù‡Ù„</div><div class="field-value">${data.maritalStatus || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">ØªØ¹Ø¯Ø§Ø¯ ÙØ±Ø²Ù†Ø¯Ø§Ù†</div><div class="field-value">${data.childrenCount || ''}</div></div>
            <div class="field"><div class="field-label">Ø³Ù…Øª</div><div class="field-value">${data.position || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†ÙˆØ¹ Ø§Ø³ØªØ®Ø¯Ø§Ù…</div><div class="field-value">${data.employmentType || ''}</div></div>
            <div class="field"><div class="field-label">Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ</div><div class="field-value">${data.degree || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ø±Ø´ØªÙ‡ ØªØ­ØµÛŒÙ„ÛŒ</div><div class="field-value">${data.major || ''}</div></div>
            <div class="field"><div class="field-label">Ø³Ø§Ø¨Ù‚Ù‡</div><div class="field-value">${data.experienceYears || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†ÙˆØ¹ Ø§Ø´ØªØºØ§Ù„</div><div class="field-value">${data.dutyType || ''}</div></div>
            <div class="field"><div class="field-label">Ù¾Ø§ÛŒÙ‡</div><div class="field-value">${data.grade || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ø´Ù…Ø§Ø±Ù‡ Ú©Ù„Ø§Ø³</div><div class="field-value">${data.classNumber || ''}</div></div>
            <div class="field"><div class="field-label">Ø±Ø§Ø¨Ø·</div><div class="field-value">${data.liaison || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ø´Ù…Ø§Ø±Ù‡ Ø­Ø³Ø§Ø¨</div><div class="field-value">${data.salaryAccount || ''}</div></div>
            <div class="field"><div class="field-label">Ù†ÙˆØ¹ Ø¨ÛŒÙ…Ù‡</div><div class="field-value">${data.insuranceType || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ù†Ø§Ù… Ù‡Ù…Ø³Ø±</div><div class="field-value">${data.spouseName || ''}</div></div>
            <div class="field"><div class="field-label">Ø´ØºÙ„ Ù‡Ù…Ø³Ø±</div><div class="field-value">${data.spouseJob || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡</div><div class="field-value">${data.mobile || ''}</div></div>
            <div class="field"><div class="field-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†</div><div class="field-value">${data.phone || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">Ú©Ø¯ Ù¾Ø³ØªÛŒ</div><div class="field-value">${data.postalCode || ''}</div></div>
            <div class="field"><div class="field-label">Ù†Ø§Ù… ØªØ§ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡</div><div class="field-value">${data.approverName || ''}</div></div>
          </div>
          <div class="row">
            <div class="field"><div class="field-label">ØªØ§Ø±ÛŒØ® ØªØ§ÛŒÛŒØ¯</div><div class="field-value">${data.approveDate || ''}</div></div>
            <div class="field"><div class="field-label">Ø¢Ø¯Ø±Ø³</div><div class="field-value">${data.address || ''}</div></div>
          </div>
          
          <div class="approval-section">
            <div class="approval-line">
              <div class="approval-space">Ø§Ù…Ø¶Ø§Ø¡ Ú©Ø§Ø±Ù…Ù†Ø¯</div>
              <div class="approval-space">Ø§Ù…Ø¶Ø§Ø¡ Ù…Ø³Ø¦ÙˆÙ„</div>
            </div>
          </div>
        </div>
        </body>
        </html>
      `;
      
      const printWindow = window.open('', '', 'width=800,height=600');
      printWindow.document.write(html);
      printWindow.document.close();
      setTimeout(() => {
        printWindow.print();
      }, 250);
    }

    function submitTeacherForm(e) {
      e.preventDefault();
      const data = collectFormData('teacherForm');
      
      const cb = 'handleCreate' + Date.now();
      const params = new URLSearchParams();
      params.append('action', 'create');
      params.append('callback', cb);
      Object.entries(data).forEach(([k, v]) => params.append(k, v));
      
      const url = WEBAPP_URL + '?' + params;
      const script = document.createElement('script');
      window[cb] = function(json) {
        if (json?.status === 'success') {
          showToast('âœ“ Ø«Ø¨Øª Ø´Ø¯', 'success');
          document.getElementById('teacherForm').reset();
          setTimeout(() => backToMain(), 1500);
        } else {
          showToast('âŒ Ø®Ø·Ø§: ' + (json?.message || 'Ù†Ø§Ù…Ø´Ø®Øµ'), 'danger');
        }
        if (document.head.contains(script)) document.head.removeChild(script);
        delete window[cb];
      };
      script.onerror = function() {
        showToast('âœ“ Ø«Ø¨Øª Ø´Ø¯ (Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„)', 'success');
        setTimeout(() => backToMain(), 1500);
      };
      script.src = url;
      document.head.appendChild(script);
    }

    function submitAdminForm(e) {
      e.preventDefault();
      const data = collectFormData('adminForm');
      const key = data.personnelCode || data.nationalId;
      
      if (!key) {
        showToast('Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ ÛŒØ§ Ú©Ø¯ Ù…Ù„ÛŒ Ù„Ø§Ø²Ù… Ø§Ø³Øª', 'warning');
        return;
      }
      
      const action = currentIndex === -1 ? 'create' : 'update';
      const cb = 'handleAdmin' + Date.now();
      const params = new URLSearchParams();
      params.append('action', action);
      params.append('callback', cb);
      if (action === 'update') params.append('key', key);
      Object.entries(data).forEach(([k, v]) => params.append(k, v));
      
      const url = WEBAPP_URL + '?' + params;
      const script = document.createElement('script');
      window[cb] = function(json) {
        if (json?.status === 'success') {
          showToast('âœ“ ' + (action === 'create' ? 'Ø«Ø¨Øª' : 'ÙˆÛŒØ±Ø§ÛŒØ´') + ' Ø´Ø¯', 'success');
          setTimeout(() => {
            loadAllData();
            backToSearch();
          }, 800);
        } else {
          showToast('âŒ Ø®Ø·Ø§: ' + (json?.message || 'Ù†Ø§Ù…Ø´Ø®Øµ'), 'danger');
        }
        if (document.head.contains(script)) document.head.removeChild(script);
        delete window[cb];
      };
      script.onerror = function() {
        showToast('âœ“ ' + (action === 'create' ? 'Ø«Ø¨Øª' : 'ÙˆÛŒØ±Ø§ÛŒØ´') + ' Ø´Ø¯ (Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„)', 'success');
        setTimeout(() => {
          loadAllData();
          backToSearch();
        }, 800);
      };
      script.src = url;
      document.head.appendChild(script);
    }

    function editRecord() {
      showToast('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯', 'info');
    }

    function deleteRecord() {
      if (currentIndex === -1) {
        showToast('Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ø±Ú©ÙˆØ±Ø¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'warning');
        return;
      }
      
      if (!confirm('Ø§Ø² Ø­Ø°Ù Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) return;
      
      const data = collectFormData('adminForm');
      const key = data.personnelCode || data.nationalId;
      
      const cb = 'handleDelete' + Date.now();
      const params = new URLSearchParams();
      params.append('action', 'delete');
      params.append('key', key);
      params.append('callback', cb);
      
      const url = WEBAPP_URL + '?' + params;
      const script = document.createElement('script');
      window[cb] = function(json) {
        if (json?.status === 'success') {
          showToast('âœ“ Ø­Ø°Ù Ø´Ø¯', 'success');
          setTimeout(() => {
            loadAllData();
            backToSearch();
          }, 800);
        } else {
          showToast('âŒ Ø®Ø·Ø§', 'danger');
        }
        if (document.head.contains(script)) document.head.removeChild(script);
        delete window[cb];
      };
      script.src = url;
      document.head.appendChild(script);
    }

    document.getElementById('searchInput').addEventListener('input', function() {
      const q = this.value.trim().toLowerCase();
      
      if (q.length === 0) {
        document.getElementById('searchResults').style.display = 'none';
        return;
      }
      
      // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§
      filteredStaff = allStaff.filter(item => {
        const firstName = String(item.firstName || '').toLowerCase();
        const lastName = String(item.lastName || '').toLowerCase();
        const code = String(item.personnelCode || '').toLowerCase();
        const nationalId = String(item.nationalId || '').toLowerCase();
        
        // Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Ø´Ø§Ù…Ù„ Ø¨ÙˆØ¯Ù† Ù‡Ø± Ø­Ø±Ù
        return firstName.includes(q) || 
               lastName.includes(q) || 
               code.includes(q) || 
               nationalId.includes(q);
      });
      
      console.log('Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø±Ø§ÛŒ "' + q + '":', filteredStaff.length);
      
      if (filteredStaff.length > 0) {
        displaySearchResults();
      } else {
        document.getElementById('searchResults').style.display = 'none';
      }
    });

    loadAllData();
  </script>
</body>
</html>
